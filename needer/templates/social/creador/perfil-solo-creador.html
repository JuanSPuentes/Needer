{% extends innercontent %}
{% load static %}
{% load pub_extras %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/perfil-creador.css'%} ">
<link rel="stylesheet" href="{% static 'css/publicacion.css'%} ">
{% endblock css %}

{% block headtitle %}
Needer | {{object.username}}
{% endblock headtitle %}

{% block inner-content %}

<div class="container py-4">
    

    <!--Datos personales-->
    <div class="seccion-arriba w-100 row mx-0">

        <!--FOTO-->
        <div class="col-lg-3 col-md-4 text-center mb-0 mb-sm-3 px-0 mx-0 align-items-center">
            {% if object.foto %}
            <button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" class="col-12 btn rounded-circle overflow-hidden update-imagen img-fluid" style="background-image: url({{object.foto.url}}); object-fit: cover;"> </button>
            
            {% else %}

            <button type="button" data-bs-toggle="modal" data-bs-target="#exampleModal"   class="col-12 btn rounded-circle overflow-hidden update-imagen img-fluid" style="background-image: url('{% static 'img/default-profile.png' %}');"> </button>
            
            {% endif %}

        </div>

        

        <!--Texto Informacion-->
        <div class="col-lg-7 col-md-6 d-flex align-items-center container g-2 justify-content-center">
            <div class="w-100 col-12 d-table-cell align-bottom row g-2  text-break text-lg-start text-md-start text-sm-center text-center"> 
            
            {% if object.apodo %}
            <h2 class="text-primary fw-bold mb-0 mb-sm-2 mw-100">{{object.apodo}}
            </h2    >
            <h3 class="text-muted">@ {{object.username}}</h3>

            {% else %}
            <h2 class="text-primary fw-bold mb-0 mb-sm-2 mw-100">{{object.username}}
            </h2>
            {% endif %}
            
            <h4 class="text-muted"><i class="bi bi-geo-alt"></i> {{object.pais}}</h4>
            <h4 class="text-muted mb-0">needer.com.co/{{object.slug}}</h4>
            
            </div>
            
            
        </div>


        <!--Ajustes-->
        <div class="col-md-2 d-flex align-items-end container g-2 justify-content-center">
            <div class="w-100 col-12 d-table-cell align-bottom row g-2 text-lg-start text-sm-center text-center"> 
                <h3 class="py-2 text-primary"><a href="{% url 'account_profile' %}"><i class="bi bi-gear"></i></a></h3>
            </div>
           
          
        </div>

    </div>



    <!--Navegacion secundaria-->
    <div class="mb-4 px-0 container-fluid my-4 d-flex justify-content-lg-start justify-content-md-start justify-content-sm-center justify-content-center border-bottom mb-3 pre-ajustes">
        {% with url_name=request.resolver_match.url_name %}

        <a class="mx-auto mx-lg-3 mx-xl-3 mx-md-3 mx-sm-auto ms-md-0 ms-lg-0 ms-xl-0 mb-0 fw-bolder text-muted border-0 text-decoration-none  text-center
        {% if url_name == 'detalle-creador' %}active {% endif %}" href="{{object.get_absolute_url}}"><h2 class="mb-0">Perfil</h2></a>
        <a class="mx-auto mx-lg-3 mx-xl-3 mx-md-3 mx-sm-auto ms-md-0 ms-lg-0 ms-xl-0 mb-0 fw-bolder text-muted text-decoration-none text-center" href="#"><h2 class="mb-0">Galeria</h2></a>
        <a class="mx-auto mx-lg-3 mx-xl-3 mx-md-3 mx-sm-auto ms-md-0 ms-lg-0 ms-xl-0 mb-0 fw-bolder text-muted border-0 text-decoration-none text-center
        {% if url_name == 'account_change_password' %}active {% endif %}" href="{% url 'account_change_password' %}"><h2 class="mb-0">Marketplace</h2></a>

        {% endwith %}
    </div>




<!--Contenido interno-->
<div class="my-4 container-fluid row w-100 mx-0 d-flex justify-content-lg-between justify-content-md-center justify-content-sm-center justify-content-center">
 
    <!--Bibliografria-->
    <div class="row py-4 col-sm-12 col-lg-5 rounded shadow bg-white mb-4 mb-sm-5 mb-lg-0 mb-md-5 mb-xs-5 divbib">

            <!--Bibliografia-->
                <h3 class="text-primary">Bibliografía</h3>
                <p class="text-muted text-break">{{object.biografia}}</p>
                
                <!--link-->
                {% if object.link %}
                <a href="{{object.link}}" class="text-secondary fst-italic fw-light text-decoration-none"><i class="bi bi-link-45deg"></i>{{object.link}}</a>
                {% endif %}

            <!--Tipo de celebridad-->
            <div class="container-fluid justify-content-between my-3 ">
            {% for tipo in object.tipo_celebridad.all %}
                <a href="#" class="categorias-badges btn-secondary px-2 mb-2 mx-2 badge rounded-pill col text-center text-decoration-none">{{tipo.nombre}}</a>
            {% endfor %}
            </div>

            <!--Rango del creador-->
            <div class="container-fluid my-3">
                <h3 class="text-primary">Interacciones</h3> 

                <div class="row d-flex justify-content-center align-items-center mt-4">
                    <div class="row col-md-6 col-sm-12 text-center justify-content-center align-items-center d-flex icono-dinero">   
                        <h4><i class="bi bi-coin fw-bold"></i></h4> 
                        <h5 class="fw-bold">213456</h5>
                        <h6 class="text-muted">Ventas</h6>
                    </div>

                    <div class="row col-md-6 col-sm-12 text-center justify-content-center align-items-center d-flex icono-seguidores">
                        <h4><i class="bi bi-person-hearts"></i></h4> 
                        <h5 class="fw-bold">7534</h5>
                        <h6 class="text-muted">Seguidores</h6>    
                    </div>  
                </div>
            </div>


    </div>





    
     <!-- Contenido a la derecha UWU -->
        <div class="d-flex justify-content-center row container-fluid col-sm-12 col-lg-7 px-0">

            <!--TODOS LOS DIVS DENTRO DEL CONTENIDO DERECHA DEBEN IR CON PX-0 Y CONTAINER FLUID-->




             <!--Esto crea publicación-->
                <div class="row container-fluid px-0 bg-white rounded shadow py-4 d-flex justify-content-center align-items-center" style="height:auto;">
                    <!--BOTON FOTO-->
                    <div class="col-lg-2 col-md-2 col-xl-2 col-sm-12   col-12 justify-content-center d-flex pe-lg-0 pe-xl-0 pe-md-0 pe-sm-auto pe-auto">
                        <a href="{{object.get_absolute_url}}" class="mb-lg-0 mb-md-0 mb-sm-3 mb-3 mb-xl-0 text-center text-sm-center text-md-start text-lg-start text-xl-start">
                            {% if object.foto %}
                            
                            <img class="rounded-circle img-fluid profile-img" alt="profile" src="{{object.foto.url}}"
                            data-holder-rendered="true">
            
                            {% else %}
                            <img class="rounded-circle img-fluid profile-img" alt="profile" src="{% static 'img/default-profile.png' %}"
                            data-holder-rendered="true">
                        
                            {% endif %}
                        </a>
                        </div>
                        <!--INPUT-->
                        <div class="col-12 col-xl-7 col-sm-12 col-md-7 col-lg-7 gap-0 d-flex align-items-center">
                            <a href="{% url 'crear-publicacion' %}" class=" text-muted text-start border-0  form-control btn btn-lg new-post-button align-middle">
                                <h5 class="">En qué estás pensando?</h5></a>
                        </div>

                        <div class="container-fluid col justify-content-center d-flex text-cente align-middle mt-lg-0 mt-xl-0 mt-md-0 mt-sm-3 mt-3">
                            <a href="{% url 'crear-publicacion' %}" class="btn btn-sm border-0 bg-outline text-muted d-flex align-items-center"><h4 class="fw-bold text-dark text-center"><i class="bi bi-upload"></i></h4></a>
                        </div>
                </div>



                
                {% if not publicaciones %}

                <div class="col-12 text-center rounded shadow">
        
                    <h1 class='mb-2'>Aun no tienes publicaciones!</h1>
                    <h2 class="mb-2 text-muted"><small>Que esperas apra crear una?</small></h2>
                    <img class="mt-4 mb-3" src="{% static 'img/empty.svg'%}" class="img-fluid" width="50%">
                    
                </div>


                {% else %}
                
                <!--Publicaciones con mas LIKES!-->
                <div class="col-12 text-center rounded shadow mt-4">

                    <h2 class="fw-bold text-secondary fw-bold mt-3">Publicaciones con más likes!</h2>

                    <div class="row py-3 border-bottom align-items-center justify-content-around d-flex">
                        <img class="img-fluid profile-img-public col-md-4 col-sm-4" alt="profile" src="{% static 'img/default-profile.png' %}" data-holder-rendered="true">
                        <h4 class="col-md-6 col-sm-8 text-break text-center fw-bold">Texto de la publicación</h4>
                        <h3 class="col-md-2 col-sm-12 my-sm-3 fw-bold">3487  <i class="bi bi-hearts text-terciary"></i></h3>
                    </div>

                    <div class="row py-3 border-bottom align-items-center justify-content-around d-flex">
                        <img class="img-fluid profile-img-public col-md-4 col-sm-4" alt="profile" src="{% static 'img/default-profile.png' %}" data-holder-rendered="true">
                        <h4 class="col-md-6 col-sm-8 text-break text-center fw-bold">Texto de la publicación</h4>
                        <h3 class="col-md-2 col-sm-12 my-sm-3 fw-bold">3487  <i class="bi bi-hearts text-terciary"></i></h3>
                    </div>

                    <div class="row py-3 align-items-center justify-content-around d-flex">
                        <img class="img-fluid profile-img-public col-md-4 col-sm-4" alt="profile" src="{% static 'img/default-profile.png' %}" data-holder-rendered="true">
                        <h4 class="col-md-6 col-sm-8 text-break text-center fw-bold">Texto de la publicación</h4>
                        <h3 class="col-md-2 col-sm-12 my-sm-3 fw-bold">3487  <i class="bi bi-hearts text-terciary"></i></h3>
                    </div>

                </div>




                <!--Publicacion-->

                {% for publicacion in publicaciones %}
                <div class="row container-fluid px-0 bg-white rounded shadow d-flex justify-content-around align-items-center mt-4 publicacion" onclick="window.open('{{publicacion.get_absolute_url}}')"  style="height:auto; cursor: pointer;">
                    <div class="col-12 d-flex align-items-center justify-content-start pt-4">
                            <div class="col-lg-2 col-md-2   col-3 justify-content-center d-flex pe-0">
                            <a href="{{publicacion.user.get_absolute_url}}" class="text-center">
                                {% if object.foto %}
                                
                                <img class="rounded-circle img-fluid profile-img" alt="profile" src="{{object.foto.url}}"
                                data-holder-rendered="true">
                
                                {% else %}
                                <img class="rounded-circle img-fluid profile-img" alt="profile" src="{% static 'img/default-profile.png' %}"
                                data-holder-rendered="true">
                            
                                {% endif %}
                            </a>
                            </div>

                        <!--Autor y Hora-->
                        <div class="row col-7 col-md-8 col-lg-8 gap-0 ms-1">
                        <h5 class="text-secondary fw-bold mb-0 mb-lg-0 mb-xl-0 mb-md-0 mb-sm-2 mw-100 my-0 py-0">
                        <a href="{{publicacion.user.get_absolute_url}}" class="text-decoration-none text-secondary">
                       
                            {% if publicacion.user.apodo %} {{publicacion.user.apodo}} {% else %} {{publicacion.user.username}} {% endif %}
                        </a> 
                        </h5>
                        <p class="my-0 text-muted">@{{publicacion.user.username}} · {{publicacion.fecha_creacion|fecha_exacta}}</p>
                        {% if publicacion|editado %}{{publicacion|editado|safe}}{% endif %}
                        </div>

                        <div class="col d-flex align-items-center justify-content-end">
                            <a class="btn text-primary text-end editar-pub-btn"><i class="bi bi-pencil-square border-none"></i></a>
                        </div>
                        
                    </div>

                    
                    
                    <!--Contenido de la Publicación-->
                    <div  class="d-flex justify-content-center row {% if publicacion.nsfw %} pub-container align-items-center{% endif %}">
                        
                        
                        <div class="text-decoration-none row container-fluid px-0 bg-white pt-4 mw-100 {{publicacion.nsfw|nsfw}}" style="height:auto;">
                            {% if publicacion.descripcion %}
                            
                            <div class="w-100 text-break text-decoration-none text-dark row justify-content-center align align-items-start d-flex container px-4">
                                {{publicacion.descripcion|safe}}
                            </div>


                            {% endif %}

                            {% if publicacion.archivo %}

                            {{publicacion.archivo|tipo_archivo|safe}}
                            
                            {% endif %}

                        </div>
                        <!--TODO Validar funcionamiento-->
                        {% if publicacion.nsfw %}<h3 class="align-middle text-danger nsfw-title text-center fw-bold"><i class="bi bi-radioactive"></i> NSFW <i class="bi bi-radioactive"></i></h4>{% endif %}


                    </div>

                    <div class="row text-decoration-none row container-fluid px-0 pb-4 bg-white mw-100">
                             <!--Botones de la Publicación--> 
                             <a href="{{publicacion.get_absolute_url}}" class="col-lg-12 row mt-4 text-decoration-none px-4">
                                <button class="btn text-primary col-6 like"><i class="bi bi-heart"></i> Like </button>
                                <button class="btn text-primary col-6 like"><i class="bi bi-chat-left"></i> Comentar </button>
                            </a>
                    </div>

                   

                </div>

                {% endfor %}


                {% endif %}



                





        <!--END CONTENIDO DERECHA-->
        </div>

 </div>
    
</div>

{% include 'social/creador/foto-perfil-modal.html' %}

{% endblock inner-content %}

{% block script %}

{% endblock script %}